gather('date', 'frequency', -alarm_id)  %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day') %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
# load library
# note: there are some conflicts
library(tidyverse)
# set random seed
seed <- 991920861 # <Replace '765' with your student ID here.>
set.seed(seed)
# generate alarm id, dates and region vectors
# paste0: concatenate string (0 means there is no space)
alarms_id.vt <- paste0('alarms_', sample(LETTERS, size = 10, replace = FALSE))
alarms_dates.vt <- paste0('d.',seq(Sys.Date()-60, Sys.Date(), by = '1 day'))  # 60 days back.
alarms_region.vt <- c('AKL_North', 'AKL_Central', 'Waiheke','AKL_South', 'AKL_Others')
# generate random alarm frequency counts
alarms_count.mt <- matrix(round(runif(length(alarms_id.vt) * length(alarms_dates.vt))*seed),
nrow = length(alarms_id.vt), ncol=length(alarms_dates.vt))
colnames(alarms_count.mt) <- alarms_dates.vt
# set up data frames
alarms_count.df <- data.frame(alarm_id = alarms_id.vt, alarms_count.mt)
alarms_info.df <- data.frame(alarm_ID = alarms_id.vt, alarms_region = alarms_region.vt)
# Task 2: Wrangling
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id)  %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day') %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
View(alarms_info.df)
View(alarms_info.df)
View(alarms_info.df)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id)  %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id)  %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
# load library
# note: there are some conflicts
library(tidyverse)
# set random seed
seed <- 991920861 # <Replace '765' with your student ID here.>
set.seed(seed)
# generate alarm id, dates and region vectors
# paste0: concatenate string (0 means there is no space)
alarms_id.vt <- paste0('alarms_', sample(LETTERS, size = 10, replace = FALSE))
alarms_dates.vt <- paste0('d.',seq(Sys.Date()-60, Sys.Date(), by = '1 day'))  # 60 days back.
alarms_region.vt <- c('AKL_North', 'AKL_Central', 'Waiheke','AKL_South', 'AKL_Others')
# generate random alarm frequency counts
alarms_count.mt <- matrix(round(runif(length(alarms_id.vt) * length(alarms_dates.vt))*seed),
nrow = length(alarms_id.vt), ncol=length(alarms_dates.vt))
colnames(alarms_count.mt) <- alarms_dates.vt
# set up data frames
alarms_count.df <- data.frame(alarm_id = alarms_id.vt, alarms_count.mt)
alarms_info.df <- data.frame(alarm_ID = alarms_id.vt, alarms_region = alarms_region.vt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id)  %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id)  %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
View(alarms_count.mt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
View(alarms_info.df)
View(alarms_info.df)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_ID' = 'alarm_id')) %>%
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# join data frames by alarm id
left_join(alarms_info.df, by = c('alarm_ID' = 'alarm_id')) %>%
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:month:day, remove = TRUE)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE)
View(alarms_insight_df)
# convert dates to days
$weekday <- weekdays($date)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
# convert dates to days
alarms_count.df$weekday <- weekdays(alarms_count.df$date)
View(alarms_count.df)
View(alarms_info.df)
# load library
# note: there are some conflicts
library(tidyverse)
# set random seed
seed <- 991920861 # <Replace '765' with your student ID here.>
set.seed(seed)
# generate alarm id, dates and region vectors
# paste0: concatenate string (0 means there is no space)
alarms_id.vt <- paste0('alarms_', sample(LETTERS, size = 10, replace = FALSE))
alarms_dates.vt <- paste0('d.',seq(Sys.Date()-60, Sys.Date(), by = '1 day'))  # 60 days back.
alarms_region.vt <- c('AKL_North', 'AKL_Central', 'Waiheke','AKL_South', 'AKL_Others')
# generate random alarm frequency counts
alarms_count.mt <- matrix(round(runif(length(alarms_id.vt) * length(alarms_dates.vt))*seed),
nrow = length(alarms_id.vt), ncol=length(alarms_dates.vt))
colnames(alarms_count.mt) <- alarms_dates.vt
# set up data frames
alarms_count.df <- data.frame(alarm_id = alarms_id.vt, alarms_count.mt)
alarms_info.df <- data.frame(alarm_ID = alarms_id.vt, alarms_region = alarms_region.vt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
# convert dates to days
alarms_count.df$weekday <- weekdays(alarms_count.df$date)
View(alarms_count.mt)
View(alarms_info.df)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
# load library
# note: there are some conflicts
library(tidyverse)
# set random seed
seed <- 991920861 # <Replace '765' with your student ID here.>
set.seed(seed)
# generate alarm id, dates and region vectors
# paste0: concatenate string (0 means there is no space)
alarms_id.vt <- paste0('alarms_', sample(LETTERS, size = 10, replace = FALSE))
alarms_dates.vt <- paste0('d.',seq(Sys.Date()-60, Sys.Date(), by = '1 day'))  # 60 days back.
alarms_region.vt <- c('AKL_North', 'AKL_Central', 'Waiheke','AKL_South', 'AKL_Others')
# generate random alarm frequency counts
alarms_count.mt <- matrix(round(runif(length(alarms_id.vt) * length(alarms_dates.vt))*seed),
nrow = length(alarms_id.vt), ncol=length(alarms_dates.vt))
colnames(alarms_count.mt) <- alarms_dates.vt
# set up data frames
alarms_count.df <- data.frame(alarm_id = alarms_id.vt, alarms_count.mt)
alarms_info.df <- data.frame(alarm_ID = alarms_id.vt, alarms_region = alarms_region.vt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
View(alarms_count.df)
View(alarms_count.df)
View(alarms_count.mt)
View(alarms_info.df)
# load library
# note: there are some conflicts
library(tidyverse)
# set random seed
seed <- 991920861 # <Replace '765' with your student ID here.>
set.seed(seed)
# generate alarm id, dates and region vectors
# paste0: concatenate string (0 means there is no space)
alarms_id.vt <- paste0('alarms_', sample(LETTERS, size = 10, replace = FALSE))
alarms_dates.vt <- paste0('d.',seq(Sys.Date()-60, Sys.Date(), by = '1 day'))  # 60 days back.
alarms_region.vt <- c('AKL_North', 'AKL_Central', 'Waiheke','AKL_South', 'AKL_Others')
# generate random alarm frequency counts
alarms_count.mt <- matrix(round(runif(length(alarms_id.vt) * length(alarms_dates.vt))*seed),
nrow = length(alarms_id.vt), ncol=length(alarms_dates.vt))
colnames(alarms_count.mt) <- alarms_dates.vt
# set up data frames
alarms_count.df <- data.frame(alarm_id = alarms_id.vt, alarms_count.mt)
alarms_info.df <- data.frame(alarm_ID = alarms_id.vt, alarms_region = alarms_region.vt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
weekday <- weekdays($date)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
weekday <- weekdays(alarms_count.df$date)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
weekday <- weekdays(alarms_insight_df$date)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE)
weekday <- weekdays(alarms_insight_df$date)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE)
weekday <- weekdays(alarms_count.df$date)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
weekday <- weekdays(alarms_count.df$date)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
weekday <- weekdays(alarms_count.df$date) %>%
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
# convert dates to days
weekday <- weekdays(alarms_count.df$date) %>%
mutate(weekday)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
# convert dates to days
mutate(weekdays(alarms_count.df$date)) %>%
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
unite('date', year:day, sep = "-", remove = TRUE) %>%
# convert dates to days
mutate(weekdays(alarms_count.df$date))
View(alarms_info.df)
View(alarms_count.df)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
# load library
# note: there are some conflicts
library(tidyverse)
# set random seed
seed <- 991920861 # <Replace '765' with your student ID here.>
set.seed(seed)
# generate alarm id, dates and region vectors
# paste0: concatenate string (0 means there is no space)
alarms_id.vt <- paste0('alarms_', sample(LETTERS, size = 10, replace = FALSE))
alarms_dates.vt <- paste0('d.',seq(Sys.Date()-60, Sys.Date(), by = '1 day'))  # 60 days back.
alarms_region.vt <- c('AKL_North', 'AKL_Central', 'Waiheke','AKL_South', 'AKL_Others')
# generate random alarm frequency counts
alarms_count.mt <- matrix(round(runif(length(alarms_id.vt) * length(alarms_dates.vt))*seed),
nrow = length(alarms_id.vt), ncol=length(alarms_dates.vt))
colnames(alarms_count.mt) <- alarms_dates.vt
# set up data frames
alarms_count.df <- data.frame(alarm_id = alarms_id.vt, alarms_count.mt)
alarms_info.df <- data.frame(alarm_ID = alarms_id.vt, alarms_region = alarms_region.vt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
View(alarms_count.mt)
View(alarms_count.mt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID'))
View(alarms_insight_df)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
# clean up dates
unite('date', year:day, sep = "-", remove = TRUE)
View(alarms_insight_df)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
group_by(year, month, day, alarms_region) %>%
summarise(average_count = round(mean(frequency),2))
View(alarms_insight_df)
# load library
# note: there are some conflicts
library(tidyverse)
# set random seed
seed <- 991 # <Replace '765' with your student ID here.>
set.seed(seed)
# generate alarm id, dates and region vectors
# paste0: concatenate string (0 means there is no space)
alarms_id.vt <- paste0('alarms_', sample(LETTERS, size = 10, replace = FALSE))
alarms_dates.vt <- paste0('d.',seq(Sys.Date()-60, Sys.Date(), by = '1 day'))  # 60 days back.
alarms_region.vt <- c('AKL_North', 'AKL_Central', 'Waiheke','AKL_South', 'AKL_Others')
# generate random alarm frequency counts
alarms_count.mt <- matrix(round(runif(length(alarms_id.vt) * length(alarms_dates.vt))*seed),
nrow = length(alarms_id.vt), ncol=length(alarms_dates.vt))
colnames(alarms_count.mt) <- alarms_dates.vt
# set up data frames
alarms_count.df <- data.frame(alarm_id = alarms_id.vt, alarms_count.mt)
alarms_info.df <- data.frame(alarm_ID = alarms_id.vt, alarms_region = alarms_region.vt)
alarms_insight_df <- alarms_count.df %>%
# pivot date data for joining with info data frame
gather('date', 'frequency', -alarm_id) %>%
# separate out dates
separate(date, c('prefix', 'year', 'month', 'day')) %>%
# remove prefix column
select(-prefix) %>%
# rejoin dates
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
group_by(year, month, day, alarms_region) %>%
summarise(average_count = round(mean(frequency),2))
View(alarms_insight_df)
knitr::kable(head(alarms_insight_df, n = 10))
library(lubridate)
alarms_region.vt <- alarms_count.df %>%
gather('date', 'frequency', -alarm_id) %>%
# date is currently a string, need to convert to datetime object
mutate(dd = as.Date(format = '%Y-%m-%d')) %>%
mutate(week_day = wday(dd, label = TRUE, abbr = TRUE)) %>%
select(-dd, -date) %>%
alarms_region.vt <- alarms_count.df %>%
gather('date', 'frequency', -alarm_id) %>%
# date is currently a string, need to convert to datetime object
mutate(dd = as.Date(substring(date, 3), format = '%Y-%m-%d')) %>%
mutate(week_day = wday(dd, label = TRUE, abbr = TRUE)) %>%
select(-dd, -date) %>%
alarms_region.vt <- alarms_count.df %>%
gather('date', 'frequency', -alarm_id) %>%
# date is currently a string, need to convert to datetime object
mutate(dd = as.Date(substring(date, 3), format = '%Y-%m-%d')) %>%
mutate(week_day = wday(dd, label = TRUE, abbr = TRUE)) %>%
# clean up
select(-dd, -date) %>%
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
group_by(week_day) %>%
summarise(average_count = round(mean(frequency),2)) %>%
arrange(average_count)
library(lubridate)
alarms_insight_df <- alarms_count.df %>%
gather('date', 'frequency', -alarm_id) %>%
# date is currently a string, need to convert to datetime object
mutate(dd = as.Date(substring(date, 3), format = '%Y-%m-%d')) %>%
mutate(week_day = wday(dd, label = TRUE, abbr = TRUE)) %>%
# clean up
select(-dd, -date) %>%
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
group_by(week_day) %>%
summarise(average_count = round(mean(frequency),2)) %>%
arrange(average_count)
View(alarms_insight_df)
alarms_insight_df <- alarms_count.df %>%
gather('date', 'frequency', -alarm_id) %>%
# date is currently a string, need to convert to datetime object
mutate(dd = as.Date(substring(date, 3), format = '%Y.%m.%d')) %>%
mutate(week_day = wday(dd, label = TRUE, abbr = TRUE)) %>%
# clean up
select(-dd, -date) %>%
left_join(alarms_info.df, by = c('alarm_id' = 'alarm_ID')) %>%
group_by(week_day) %>%
summarise(average_count = round(mean(frequency),2)) %>%
arrange(average_count)
View(alarms_insight_df)
